# Rime schema
# encoding: utf-8
# æœ™æœˆæ‹¼éŸ³è‡ªå®šç¾©ä¿®æ”¹ï¼Œç”¨æ–¼è‡ªå¸¶çš„é»˜èªæœ™æœˆæ‹¼éŸ³
# å‚è€ƒå®šåˆ¶æŒ‡å— https://github.com/rime/home/wiki/RimeWithSchemata#%E5%AE%9A%E8%A3%BD%E6%8C%87%E5%8D%97

#patch:
#  "ä¸€ç´šè¨­å®šé …/äºŒç´šè¨­å®šé …/ä¸‰ç´šè¨­å®šé …": æ–°çš„è¨­å®šå€¼
#  "å¦ä¸€å€‹è¨­å®šé …": æ–°çš„è¨­å®šå€¼
#  "å†ä¸€å€‹è¨­å®šé …": æ–°çš„è¨­å®šå€¼
#  "å«åˆ—è¡¨çš„è¨­å®šé …/@0": åˆ—è¡¨ç¬¬ä¸€å€‹å…ƒç´ æ–°çš„è¨­å®šå€¼
#  "å«åˆ—è¡¨çš„è¨­å®šé …/@last": åˆ—è¡¨æœ€å¾Œä¸€å€‹å…ƒç´ æ–°çš„è¨­å®šå€¼
#  "å«åˆ—è¡¨çš„è¨­å®šé …/@before 0": åœ¨åˆ—è¡¨ç¬¬ä¸€å€‹å…ƒç´ ä¹‹å‰æ’å…¥æ–°çš„è¨­å®šå€¼ï¼ˆä¸å»ºè­°åœ¨è£œéªä¸­ä½¿ç”¨ï¼‰
#  "å«åˆ—è¡¨çš„è¨­å®šé …/@after last": åœ¨åˆ—è¡¨æœ€å¾Œä¸€å€‹å…ƒç´ ä¹‹å¾Œæ’å…¥æ–°çš„è¨­å®šå€¼ï¼ˆä¸å»ºè­°åœ¨è£œéªä¸­ä½¿ç”¨ï¼‰
#  "å«åˆ—è¡¨çš„è¨­å®šé …/@next": åœ¨åˆ—è¡¨æœ€å¾Œä¸€å€‹å…ƒç´ ä¹‹å¾Œæ’å…¥æ–°çš„è¨­å®šå€¼ï¼ˆä¸å»ºè­°åœ¨è£œéªä¸­ä½¿ç”¨ï¼‰

patch:

  # ä¸€ã€æ·»åŠ è¼¸å…¥æ–¹æ¡ˆicoåœ–æ¨™ï¼Œwindowsä¸‹ç”Ÿæ•ˆ
  schema/icon: pinyin.ico

  # äºŒã€æ‰©å±•è¯åº“é…ç½®
  "translator/dictionary": luna_pinyin.extended   # ä½¿ç”¨è¯åº“luna_pinyin.extended.dict.ymlä»¥æ‰©å±•è¯åº“
  "translator/initial_quality": 1.5         # æ‹¼éŸ³çš„æƒé‡åº”è¯¥æ¯”è‹±æ–‡å¤§

  # ä¸‰ã€ä¸­è‹±æ–‡æ··è¼¸ã€è‹±æ–‡è¼¸å…¥
  dependencies:
    - melt_eng

  # æ¬¡ç¿»è¯‘å™¨ï¼Œè‹±æ–‡
  melt_eng:
    dictionary: melt_eng     # æŒ‚è½½è¯åº“ melt_eng.dict.yaml
    enable_sentence: false   # ç¦æ­¢é€ å¥
    enable_user_dict: false  # å¯ç”¨ç”¨æˆ·è¯å…¸ï¼ŒåŠ¨æ€è¯é¢‘
    initial_quality: 0.5     # åˆå§‹æƒé‡
    comment_format:          # è‡ªå®šä¹‰æç¤ºç 
      - xform/.*//           # æ¸…ç©ºæç¤ºç 

  # ä¸­è‹±æ··åˆè¯æ±‡
  cn_en:
    dictionary: ""
    user_dict: en_dicts/cn_en
    db_class: stabledb
    enable_completion: true
    enable_sentence: false
    initial_quality: 0.5
    comment_format:
      - xform/^.+$//

  # æ·»åŠ engineå…¥å£
  engine/translators/@after 2:
    table_translator@melt_eng           # è‹±æ–‡è¾“å…¥
  engine/translators/@after 3:
    table_translator@cn_en              # ä¸­è‹±æ··åˆè¯æ±‡

  # å››ã€é»˜è®¤ç®€ä½“
  "switches/@2/reset": 0  # å°‡ switcher åˆ—è¡¨ä¸­çš„ç¬¬ä¸‰å€‹å…ƒç´ ï¼ˆå³ simplification é–‹é—œï¼‰çš„åˆå§‹å€¼  0ä¸ºç¹ä½“ï¼Œ1ä¸ºç®€ä½“ã€‚é…åˆå¤§å­—è¡¨æ—¶ç¹ä½“å¯ç”¨ã€‚

  # emoji emojiè³‡æº https://github.com/rime/rime-emoji/tree/master
  # swichesæ·»åŠ emojiå¼€å…³
  "switches/@after 2":
    name: emoji
    reset: 1
    states: [ ğŸ’€, ğŸ˜„ ]

  # Emojiç¿»è¯‘å™¨
  emoji:
    opencc_config: emoji.json
    option_name: emoji
    tips: none
    inherit_comment: false

  # æ·»åŠ emojiåˆ°engine
  engine/filters/@before 0:
    simplifier@emoji

  # å…­ã€luaè…³æœ¬åŠŸèƒ½
  # æ—¥æœŸã€æ—¶é—´ã€æ˜ŸæœŸã€ISO 8601ã€æ—¶é—´æˆ³çš„è§¦å‘å…³é”®å­—
  date_translator:
    date: rq       # æ—¥æœŸï¼š 2022-11-29
    time: sj       # æ—¶é—´ï¼š 18:13
    week: xq       # æ˜ŸæœŸï¼š æ˜ŸæœŸäºŒ
    datetime: dt   # ISO 8601ï¼š 2022-11-29T18:13:11+08:00
    timestamp: ts  # æ—¶é—´æˆ³ï¼š 1669716794

  # é•¿è¯ä¼˜å…ˆï¼Œæå‡ count ä¸ªè¯è¯­ï¼Œæ’å…¥åˆ°ç¬¬ idx ä¸ªä½ç½®ã€‚
  # ç¤ºä¾‹ï¼šå°† 2 ä¸ªè¯æ’å…¥åˆ°ç¬¬ 4ã€5 ä¸ªå€™é€‰é¡¹ï¼Œè¾“å…¥ jie å¾—åˆ°ã€Œ1æ¥ 2è§£ 3å§ 4é¥¥é¥¿ 5ææ¶ã€
  long_word_filter:
    count: 2
    idx: 4
  
  # é™ä½éƒ¨åˆ†è‹±è¯­å•è¯åœ¨å€™é€‰é¡¹çš„ä½ç½®
  # è¯¦ç»†ä»‹ç» https://dvel.me/posts/make-rime-en-better/#çŸ­å•è¯ç½®é¡¶çš„é—®é¢˜
  # æ­£å¸¸æƒ…å†µï¼š è¾“å…¥ rug å¾—åˆ° ã€Œ1.rug 2.å¦‚æœ â€¦â€¦ ã€
  # é™ä½ä¹‹åï¼š è¾“å…¥ rug å¾—åˆ° ã€Œ1.å¦‚æœ 2.rug â€¦â€¦ ã€
  reduce_english_filter:
    # é™ä½åˆ°ç¬¬ idx ä¸ªä½ç½®
    idx: 2
    # è¦é™ä½çš„å•è¯ï¼ŒåŒ¹é…çš„æ˜¯è¾“å…¥ç ï¼Œå³å…¨å°å†™ã€‚
    words: [rug, bus, ship, laos, bail, bam, bans, bib, bos, chic, chit, dab, dag,
    dal, dit, dub, dug, fab, gam, ger, gus, hem, hep, hud, kat, lam, lax, lex, lug,
    lux, moc, mos, mot, mum, nad, nay, nib, nip, pak, pap, pax, rig, rum, sac, sal,
    sax, sec, shin, sis, ska, slang, sus, tad, taj, tac, tic, yep, yum, fax, cain,
    key, mob, buy, dam, wap, yes, but, put, lag, buf, lip, aid, aim, dig, dim, din,
    dip, pail, cad, chap, bend]

  # æ·»åŠ æ—¥æœŸã€æ—¥å† lua engineå…¥å£
  engine/translators/@after 0:
    lua_translator@date_translator      # æ—¶é—´ã€æ—¥æœŸã€æ˜ŸæœŸ
  engine/translators/@after 1:
    lua_translator@lunar                # å†œå†


  # ä¸ƒã€è‡ªå®šä¹‰çŸ­è¯­
  # è‡ªå®šä¹‰çŸ­è¯­ï¼šcustom_phrase.txt
  custom_phrase:
    dictionary: ""
    user_dict: custom_phrase  # å¯ä»¥ä¿®æ”¹è¿™é‡Œï¼Œæ”¹æˆè‡ªå·±çš„ txt æ–‡ä»¶
    db_class: stabledb        # åªè¯»æ•°æ®åº“ï¼Œæ— æ³•åŠ¨æ€è°ƒé¢‘ï¼›è®¾ä¸º tabledb å¯ä»¥åŠ¨æ€è°ƒé¢‘
    enable_completion: false  # è¡¥å…¨æç¤º
    enable_sentence: false    # ç¦æ­¢é€ å¥
    initial_quality: 99       # custom_phrase çš„æƒé‡åº”è¯¥æ¯” pinyin å’Œ melt_eng å¤§


  # å…«ã€å…¶å®ƒengineåŠŸèƒ½
  # æ·»åŠ engineå…¥å£
  engine/translators/@after 4:
    lua_translator@number_translator    # æ•°å­—ã€é‡‘é¢å¤§å†™
  engine/filters/@after 0:
    lua_filter@v_filter                 # v æ¨¡å¼ symbols ä¼˜å…ˆï¼ˆå¦åˆ™æ˜¯è‹±æ–‡ä¼˜å…ˆï¼‰

  engine/filters/@after 1:
    lua_filter@reduce_english_filter    # é™ä½éƒ¨åˆ†è‹±è¯­å•è¯åœ¨å€™é€‰é¡¹çš„ä½ç½®
  engine/filters/@after 2:
    lua_filter@long_word_filter         # é•¿è¯ä¼˜å…ˆ
  engine/filters/@after 3:
    lua_filter@corrector                # é”™éŸ³é”™å­—æç¤º

  # ä¹ã€ç¬¦è™Ÿè¼¸å…¥å®šè£½
  punctuator:
    full_shape:
      '\': "ã€"
      "/" : [ ï¼, "/", Ã· ]
      __include: default:/punctuator/full_shape  # ä» default.yaml å¯¼å…¥é…ç½®
    half_shape:
      '\': "ã€"
      "/" : [ "/", ï¼, Ã· ]
      __include: default:/punctuator/half_shape  # ä» default.yaml å¯¼å…¥é…ç½®
    symbols:
      __include: symbols_v:/symbols              # ä» symbols_v.yaml å¯¼å…¥é…ç½®

  recognizer/patterns:
    punct: "^v([0-9]|10|[A-Za-z]+)$"  # å“åº” symbols_v.yaml çš„ symbolsï¼Œç”¨ 'v' æ›¿æ¢ '/'
    reverse_lookup: "`[a-z]*'?$"
    unicode: "^U[a-f0-9]+"            # å“åº” Unicode
    number: "^R[0-9]+[.]?[0-9]*"      # å“åº” number_translator
